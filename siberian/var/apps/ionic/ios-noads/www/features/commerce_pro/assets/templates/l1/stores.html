<ion-view sb-page-background class="module-folder2 folder2-layout1">
    <ion-nav-title>{{ page_title}}</ion-nav-title>
    <ion-nav-buttons side="secondary">
        <div sb-tooltip
             collection="tooltip.collection"
             current-item="tooltip.current_item"
             button-label="tooltip.button_label"
             button-icon="tooltip.button_icon"
             show-tooltip="false"
             on-item-clicked="showTooltip(object)"
             ng-if="tooltip"></div>

        <button ng-click="right_button.action()"
                class="button button-clear header-item"
                ng-if="right_button">

            <span class="back-text">
                <span class="default-title">{{ right_button.label}}</span>
            </span>

            <i class="icon"
               ng-class="right_button.icon"></i>
        </button>
    </ion-nav-buttons>

    <!-- Search filters -->
    <div class="bar bar-subheader bigger-subheader"
         ng-if="settings && settings.showSearch">
        <ion-scroll zooming="false"
                    direction="x"
                    id="search-scroll"
                    ng-if="search_part_name == 'SEARCH'">
            <div class="tabs tabs-icon-left tabs-default">
                <a class="tab-item"
                   ng-click="setSearchPartName('SEARCH_ADDRESS')"
                   ng-if="settings.search_address_show"
                   ng-class="{
                           'selected-tab' : search.address != ''}">
                    <i class="icon ion-location"></i>
                    {{ settings.search_address_label}}
                </a>
                <a class="tab-item"
                   ng-click="setSearchPartName('SEARCH_TEXT')"
                   ng-if="settings.search_text_show"
                   ng-class="{
                           'selected-tab' : search.text != ''}">
                    <i class="icon ion-search"></i>
                    {{ settings.search_text_label}}
                </a>
                <a class="tab-item"
                   ng-click="setSearchPartName('SEARCH_TYPE')"
                   ng-if="settings.search_type_show"
                   ng-class="{
                           'selected-tab' : search.type != '' }">
                    <i class="icon ion-pricetag"></i>
                    {{ settings.search_type_label}}
                </a>
                <a class="tab-item"
                   ng-click="findByAroundyou()"
                   ng-if="settings.search_aroundyou_show"
                   ng-class="{
                           'selected-tab' : search.aroundyou }">
                    <i class="icon ion-compass"></i>
                    {{ settings.search_aroundyou_label}}
                </a>
            </div>
        </ion-scroll>

        <!-- Show when a search criterium is selected -->
        <button type="button"
                class="button button-custom button-clear on-top pull-left"
                ng-if="search_part_name != 'SEARCH'"
                ng-click="clear()">
            <i class="icon ion-chevron-left"></i>
        </button>

        <!--Show when search by text button is clicked-->
        <div ng-if="settings.search_text_show">
            <label class="item item-input search-text-input html-custom-search"
                   id="search-text-input">
                <input type="text"
                       name="search[text]"
                       ng-model="search.text"
                       placeholder="{{ ::'Search'| translate:'commerce_pro' }}"/>
            </label>
            <button type="submit"
                    id="search-text-text"
                    name="search-text-text"
                    style="right:10px;position:absolute;"
                    class="button button-custom button-clear on-top pull-right"
                    ng-click="loadPlaces()">
                <i class="icon ion-search"></i>
            </button>
        </div>

        <!--Show when search by tag button is clicked-->
        <div ng-if="settings.search_type_show">
            <ion-scroll zooming="false"
                        direction="x"
                        id="tag-scroll">
                <div class="tabs tabs-icon-left tabs-default">
                    <a class="tab-item"
                       ng-repeat="tag in settings.tags"
                       ng-click="findByTag(tag)"
                       ng-class="{
                               'selected-tag' : tag == search.type }">
                        {{tag}}
                    </a>
                </div>
            </ion-scroll>
        </div>

        <!--Show when search by address button is clicked-->
        <div ng-if="settings.search_address_show">
            <label class="item item-input search-text-input html-custom-search">
                <input type="text"
                       name="search[address]"
                       ng-model="search.address"
                       placeholder="{{ ::'Search'| translate:'commerce_pro' }}"/>
            </label>
            <button type="submit"
                    id="search-text-address"
                    name="search-text-address"
                    style="right:10px;position:absolute;"
                    class="button button-custom button-clear on-top pull-right"
                    ng-click="loadPlaces()">
                <i class="icon ion-search"></i>
            </button>
        </div>

    </div>




    <ion-content  ng-class="{
            'has-subheader has-bigger-subheader' : settings.showSearch }">

        <div class="loader"
             ng-show="getState() == 'LOADING'">
            <ion-spinner class="spinner-custom"></ion-spinner>
        </div>

        <ion-refresher ng-if="use_pull_refresh"
                       class="spinner-custom"
                       pulling-text="{{ ::'Pull to refresh...'| translate:'commerce_pro' }}"
                       on-refresh="pullToRefresh()">
        </ion-refresher>



        <div  class="list"
              ng-class="{
                     'card' : card_design}"
              ng-show="getState() == 'RESULTS' || collection.length">

            <div class="button-bar">
                <a class="button button-positive"
                   ng-click="openMap()">{{ ::'Map'| translate:'commerce_pro' }}
                </a>
            </div>

            <!-- CommercePro only -->
            <div ng-if="is_cart_enable" class="button-bar"
                 ng-if="use_button_header">
                <a class="button button-custom icon-left ion-clipboard"
                   ng-click="openHistory()">{{ ::'Order history'| translate:'commerce_pro' }}</a>
                <a class="button button-custom icon-left ion-ios-cart"
                   ng-click="openCart()">
                    <span>{{ ::'My cart'| translate:'commerce_pro' }}</span>
                    <span class="badge badge-positive badge-positive-custom">{{ cartItems}}</span>
                </a>
            </div>

            <div ng-show="show_search && collection.length > 0">
                <label class="item item-input">
                    <input type="text"
                           id="search"
                           name="search"
                           ng-model="filter_search"
                           placeholder="{{ ::'Search'| translate:'commerce_pro' }}" />


                </label>
                <a ng-click="getScan()">
                    <i class="icon ion-qr-scanner"></i>
                </a>

            </div>
        </div>

        <!--list type default-->

        <ion-list ng-if="list_type === '0'">
            <ion-item  ng-click="showItem(item)"
                       ng-repeat="item in collection| filter:filter_search">
                <ion-thumbnail class="item item-custom item-thumbnail-left" item-start>
                    <img ng-src="{{ item.picture}}"
                         ng-if="item.picture">
                    <ion-label clear item-end>
                        <h2>{{ item.title ? item.title : "" }}</h2>
                        <h3 ng-if="item.subtitle"
                            ng-bind-html="item.subtitle"></h3>
                        <p ng-if="item.description">{{ item.description}}</p>
                        <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>
                    </ion-label>

                </ion-thumbnail>

            </ion-item>
        </ion-list>


        <!--list default end-->


        <!--list type1-->

        <div  ng-if="list_type === '1'" class="list" ng-class="{'card': card_design}" ng-show="getState() == 'RESULTS' || collection.length">

            <a tabbar-items ng-click="showItem(item)" class="item item-custom"  ng-repeat="item in collection| filter:filter_search">
                <div class="item-avatar-square item-avatar" style="padding-left: 50px; min-height: 50px;">
                    <img  ng-src="{{ item.picture}}" ng-if="item.picture" />
                    <img src="./features/commerce_pro/assets/templates/images/shop-placeholder.jpg" ng-if="!item.picture" />
                    <h2 ng-bind-html="item.title"></h2>
                    <p ng-if="item.subtitle" ng-bind-html="item.subtitle"></p>
                </div>

                <p ng-if="item.description" ng-bind-html="item.description" style="border-bottom: 1px solid rgba(68,68,68,.2); "></p>

                <p ng-repeat="itemArray in item.scheduler">
                    <b>{{ itemArray.day}}</b><span style="font-style: italic;"> <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</span>
                </p>

            </a>
        </div>

        <!--end list type1-->


        <!--start list type2-->

        <div ng-if="list_type === '2'" class="list folder-layout folder-l2"
             ng-class="{'card': card_design}"
             ng-show="getState() == 'RESULTS' || collection.length">
            <div class="folder-l2-row">
                <div ng-click="showItem(item)" tabbar-items
                     class="folder-l2-col item item-custom"
                     ng-repeat="item in collection"
                     ng-class="{'single': collection.length == 1}"
                     ng-style="{'background-image': 'url(' + item.picture + ')'}">
                    <img src="./img/placeholder/blank-512.png" />
                    <p class="folder-title">{{ item.title}}</p>
                    <p class="folder-subtitle"
                       ng-if="item.subtitle">{{ item.subtitle}}</p>
                    <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>

                </div>
            </div>
        </div>

        <!--end list type2-->

        <!--start list type 3-->

        <div ng-if="list_type === '3'" class="list folder-layout folder-l3"
             ng-class="{
                             'card': card_design}"
             ng-show="getState() == 'RESULTS' || collection.length">
            <div class="folder-l3-row">
                <div ng-click="showItem(item)" tabbar-items
                     class="folder-l3-col item item-custom"
                     ng-repeat="item in collection"
                     ng-class="{
                                     'single': collection.length == 1, 'double': collection.length == 2}"
                     ng-style="{
                                     'background-image': 'url(' + item.picture + ')'}">
                    <img src="./img/placeholder/blank-512.png" />
                    <p class="folder-title">{{ item.title}}</p>
                    <p class="folder-subtitle"
                       ng-if="item.subtitle">{{ item.subtitle}}</p>
                    <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>

                </div>
            </div>

        </div>

        <!--end list type 3-->


        <!--start list type4-->

        <div ng-if="list_type === '4'" class="list folder-layout folder-l4"
             ng-class="{'card': card_design}"
             ng-show="getState() == 'RESULTS' || collection.length">
            <div class="folder-l4-row">
                <div ng-click="showItem(item)" tabbar-items
                     class="folder-l4-col item item-custom"

                     ng-repeat="item in collection"
                     ng-class="{'single': collection.length == 1}"
                     ng-style="{
                                             'background-image': 'url(' + item.picture + ')'}">
                    <img src="./img/placeholder/blank-512.png" />
                    <p class="folder-title">{{ item.title}}</p>
                    <p class="folder-subtitle"
                       ng-if="item.subtitle">{{ item.subtitle}}</p>
                    <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>

                </div>
            </div>

        </div>

        <!--end list type4-->



        <!--start list type5-->
        <div ng-if="list_type === '5'" class="list folder-layout folder-l5"
             ng-class="{'card': card_design}"
             ng-show="getState() == 'RESULTS' || collection.length">
            <div class="folder-l5-row">
                <div ng-click="showItem(item)" tabbar-items
                     class="folder-l5-col item item-custom"

                     ng-repeat="item in collection"
                     ng-class="{'single': chunks.length == 1}"
                     ng-style="{
                                             'background-image': 'url(' + item.picture + ')'}">
                    <img src="./img/placeholder/blank-512.png" />
                    <p class="folder-title">{{ item.title}}</p>
                    <p class="folder-subtitle"
                       ng-if="item.subtitle">{{ item.subtitle}}</p>
                    <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>

                </div>
            </div>

        </div>
        <!--end list type5-->

        <!--start list type6-->
        <div ng-if="list_type === '6'" class="list folder-layout folder-l6"
             ng-class="{'card': card_design}"
             ng-show="getState() == 'RESULTS' || collection.length">
            <div class="folder-l6-row">
                <div tabbar-items ng-click="showItem(item)"
                     class="folder-l6-col item item-custom"
                     ng-repeat="item in collection"
                     ng-class="{'single': collection.length == 1, 'double': collection.length == 2}"
                     ng-style="{
                                     'background-image': 'url(' + item.picture + ')'}">
                    <img src="./img/placeholder/blank-512.png" />
                    <p class="folder-title">{{ item.title}}</p>
                    <p class="folder-subtitle"
                       ng-if="item.subtitle">{{ item.subtitle}}</p>
                    <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>

                </div>
            </div>

        </div>
        <!--end list type6-->


        <!--            <div class="item item-custom"
                         ng-click="showItem(item)"
                         ng-repeat="item in collection| filter:filter_search"
                         ng-class="{'item-thumbnail-left': (item.picture), 'item-center': (!item.subtitle && !item.description)}">
                        <div class="col-">
                            <img ng-src="{{ item.picture}}"
                                 ng-if="item.picture" />
                        </div>
                        <div>
                            <h2>{{ item.title ? item.title : "" }}</h2>
                            <p class="three-lines"
                               ng-if="item.subtitle"
                               ng-bind-html="item.subtitle"></p>
                            <p ng-if="!item.subtitle && item.description">{{ item.description}}</p>
                        </div>
        
                        <div   style="margin-top:5px;float: right;">
                            <p ng-repeat="itemArray in item.scheduler">{{ itemArray.day}} <span> Open: </span>{{ itemArray.open}}<span> Closed time: </span>{{ itemArray.closed}}</p>
                        </div>
        
                        <div class="clear"></div>
        
                    </div>-->


        <div class="list"
             ng-class="{
                     'card': card_design}"
             ng-if="(getState() == 'NO_RESULTS')">
            <div class="item text-center item-custom">
                {{ ::'No items found'| translate:'commerce_pro' }}
            </div>
        </div>

        <ion-infinite-scroll ng-if="load_more"
                             on-infinite="loadMore()"
                             immediate-check="false"
                             distance="10%"
                             class="spinner-custom">
        </ion-infinite-scroll>

        <style>
            .header-item{
                display: none!important;
            }
        </style>

        <style type="text/css" ng-if="list_type === '0'">
            label.html-custom-search {
                border-radius: 3px;
                padding-left: 10px;
                padding-top: 3px;
                margin-right: 6px;

            }

        </style>

        <style type="text/css"  ng-if="list_type === '6'">
            .folder-layout.folder-l6 {
                margin-top: 15px;
            }

            .folder-layout.folder-l6.card {
                box-shadow: none;
            }

            .folder-layout.folder-l6 .folder-l6-row {
                padding: 0;
                display: flex;
                margin-bottom: 48px;
                overflow: visible;
            }

            .folder-layout.folder-l6 .folder-l6-col {
                padding: 0;
                width: 33%;
            }

            .folder-layout.folder-l6 .folder-l6-row div.folder-l6-col {
                margin: 0 6px;
                padding: 0;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: 50%;
                overflow: visible;
            }

            .folder-layout.folder-l6 .folder-l6-row div.folder-l6-col img {
                width: 100%;
            }

            .folder-layout.folder-l6 .folder-l6-row div.folder-l6-col.single,
            .folder-layout.folder-l6 .folder-l6-row div.folder-l6-col.double {
                flex: 0 1 calc(33% - 12px);
            }

            .folder-layout.folder-l6 .folder-l6-row div.folder-l6-col,
            .folder-layout.folder-l6.card .folder-l6-row div.folder-l6-col {
                border-radius: 50%;
            }

            .folder-layout.folder-l6.card .folder-l6-row div.folder-l6-col:nth-child(1) {
                margin: 0 6px 0 0;
            }

            .folder-layout.folder-l6.card .folder-l6-row div.folder-l6-col:nth-child(2) {
                margin: 0 6px 0 6px;
            }

            .folder-layout.folder-l6.card .folder-l6-row div.folder-l6-col:nth-child(3) {
                margin: 0 0 0 6px;
            }

            .folder-layout.folder-l6 .folder-title {
                position: absolute;
                bottom: -24px;
                width: 100%;
                text-align: center;
                font-size: 14px;
                padding: 0 10px;
            }

            .folder-layout.folder-l6 .folder-subtitle {
                position: absolute;
                bottom: -40px;
                width: 100%;
                text-align: center;
                font-size: 13px;
                padding: 0 10px;
            }
        </style>



        <style type="text/css" ng-if="list_type === '5'">
            .folder-layout.folder-l5 {
                margin-top: 15px;
            }

            .folder-layout.folder-l5.card {
                box-shadow: none;
            }

            .folder-layout.folder-l5 .folder-l5-row {
                padding: 0;
                display: flex;
                margin-bottom: 48px;
                overflow: visible;
            }

            .folder-layout.folder-l5 .folder-l5-col {
                padding: 0;
                width: 50%;
            }

            .folder-layout.folder-l5 .folder-l5-row div.folder-l5-col {
                margin: 0 6px;
                padding: 0;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: 50%;
                overflow: visible;
            }

            .folder-layout.folder-l5 .folder-l5-row div.folder-l5-col img {
                width: 100%;
            }

            .folder-layout.folder-l5 .folder-l5-row div.folder-l5-col.single {
                flex: 0 1 calc(50% - 12px);
            }

            .folder-layout.folder-l5 .folder-l5-row div.folder-l5-col,
            .folder-layout.folder-l5.card .folder-l5-row div.folder-l5-col {
                border-radius: 50%;
            }

            .folder-layout.folder-l5.card .folder-l5-row div.folder-l5-col:nth-child(1) {
                margin: 0 6px 0 0;
            }

            .folder-layout.folder-l5.card .folder-l5-row div.folder-l5-col:nth-child(2) {
                margin: 0 0 0 6px;
            }

            .folder-layout.folder-l5 .folder-title {
                position: absolute;
                bottom: -24px;
                width: 100%;
                text-align: center;
                font-size: 14px;
                padding: 0 10px;
            }

            .folder-layout.folder-l5 .folder-subtitle {
                position: absolute;
                bottom: -40px;
                width: 100%;
                text-align: center;
                font-size: 13px;
                padding: 0 10px;
            }
        </style>

        <style type="text/css" ng-if="list_type === '4'">
            .folder-layout.folder-l4 {
                margin-top: 15px;
            }

            .folder-layout.folder-l4.card {
                box-shadow: none;
            }

            .folder-layout.folder-l4 .folder-l4-row {
                padding: 0;
                display: flex;
            }

            .folder-layout.folder-l4 .folder-l4-col {
                padding: 0;
                width: 50%;
            }

            .folder-layout.folder-l4 .folder-l4-row div.folder-l4-col.single {
                flex: 0 1 50%;
            }

            .folder-layout.folder-l4 .folder-l4-row div.folder-l4-col {
                margin: 0;
                padding: 0;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: 50%;
            }

            .folder-layout.folder-l4 .folder-l4-row div.folder-l4-col img {
                width: 100%;
            }

            .folder-layout.folder-l4.card .folder-l4-row div.folder-l4-col {
                border: 0;
                border-radius: 0;
            }

            .folder-layout.folder-l4.card .folder-l4-row div.folder-l4-col:nth-child(1) {
                margin: 0;
            }

            .folder-layout.folder-l4.card .folder-l4-row div.folder-l4-col:nth-child(2) {
                margin: 0;
            }

            .folder-layout.folder-l4 .folder-title {
                position: absolute;
                bottom: 16px;
                width: 100%;
                text-align: center;
                font-size: 14px;
                padding: 0 10px;
            }

            .folder-layout.folder-l4 .folder-subtitle {
                position: absolute;
                bottom: 2px;
                width: 100%;
                text-align: center;
                font-size: 13px;
                padding: 0 10px;
            }
        </style>



        <style  type="text/css" ng-if="list_type === '3'">
            .folder-layout.folder-l3 {
                margin-top: 15px;
            }

            .folder-layout.folder-l3.card {
                box-shadow: none;
            }

            .folder-layout.folder-l3 .folder-l3-row {
                padding: 0;
                display: flex;
                margin-top: 12px;
            }

            .folder-layout.folder-l3 .folder-l3-row:nth-child(1) {
                margin-top: 0;
            }

            .folder-layout.folder-l3 .folder-l3-col {
                padding: 0;
                width: 33%;
            }

            .folder-layout.folder-l3 .folder-l3-row div.folder-l3-col.double,
            .folder-layout.folder-l3 .folder-l3-row div.folder-l3-col.single {
                flex: 0 1 calc(33% - 6px);
            }

            .folder-layout.folder-l3 .folder-l3-row div.folder-l3-col {
                margin: 0 6px;
                padding: 0;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: 50%;
            }

            .folder-layout.folder-l3 .folder-l3-row div.folder-l3-col img {
                width: 100%;
            }

            .folder-layout.folder-l3.card .folder-l3-row div.folder-l3-col {
                border: 0;
                border-radius: 2px;
            }

            .folder-layout.folder-l3.card .folder-l3-row div.folder-l3-col:nth-child(1) {
                margin: 0 6px 0 0;
            }

            .folder-layout.folder-l3.card .folder-l3-row div.folder-l3-col:nth-child(2) {
                margin: 0 6px 0 6px;
            }

            .folder-layout.folder-l3.card .folder-l3-row div.folder-l3-col:nth-child(3) {
                margin: 0 0 0 6px;
            }

            .folder-layout.folder-l3 .folder-title {
                position: absolute;
                bottom: 6px;
                width: 100%;
                text-align: center;
                font-size: 12px;
                padding: 0 10px;
            }

            .folder-layout.folder-l3 .folder-subtitle {
                position: absolute;
                bottom: -2px;
                width: 100%;
                text-align: center;
                font-size: 10px;
                padding: 0 10px;
            }
        </style>

        <style type="text/css" ng-if="list_type === '2'">
            .folder-layout.folder-l2 {
                margin-top: 15px;
            }

            .folder-layout.folder-l2.card {
                box-shadow: none;
            }

            .folder-layout.folder-l2 .folder-l2-row {
                padding: 0;
                display: flex;
                margin-top: 12px;
            }

            .folder-layout.folder-l2 .folder-l2-row:nth-child(1) {
                margin-top: 0;
            }

            .folder-layout.folder-l2 .folder-l2-col {
                padding: 0;
                width: 50%;
            }

            .folder-layout.folder-l2 .folder-l2-row div.folder-l2-col.single {
                flex: 0 1 calc(50% - 6px);
            }

            .folder-layout.folder-l2 .folder-l2-row div.folder-l2-col {
                margin: 0 6px;
                padding: 0;
                background-position: center center;
                background-repeat: no-repeat;
                background-size: 50%;
            }

            .folder-layout.folder-l2 .folder-l2-row div.folder-l2-col img {
                width: 100%;
            }

            .folder-layout.folder-l2.card .folder-l2-row div.folder-l2-col {
                border: 0;
                border-radius: 3px;
            }

            .folder-layout.folder-l2.card .folder-l2-row div.folder-l2-col:nth-child(1) {
                margin: 0 6px 0 0;
            }

            .folder-layout.folder-l2.card .folder-l2-row div.folder-l2-col:nth-child(2) {
                margin: 0 0 0 6px;
            }

            .folder-layout.folder-l2 .folder-title {
                position: absolute;
                bottom: 16px;
                width: 100%;
                text-align: center;
                font-size: 14px;
                padding: 0 10px;
            }

            .folder-layout.folder-l2 .folder-subtitle {
                position: absolute;
                bottom: 2px;
                width: 100%;
                text-align: center;
                font-size: 13px;
                padding: 0 10px;
            }
        </style>

        <style type="text/css" ng-if="list_type === '1'">
            .folder-layout.folder-l1 {
                margin-top: 15px;
            }
        </style>

    </ion-content>
</ion-view>