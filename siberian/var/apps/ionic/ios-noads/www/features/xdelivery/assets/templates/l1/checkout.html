<ion-view sb-page-background
          class="xdelivery xdelivery-checkout">
    <ion-nav-title>
      {{ ::"Checkout" | translate:"xdelivery" }}
    </ion-nav-title>
 
    <ion-content class="has-header">
       <div class="loader" ng-show="is_loading">
         <ion-spinner class="spinner-custom"></ion-spinner>
      </div>

     <ion-list ng-show="!is_loading">
         <div class="item item-divider item-divider-custom remove-border">
            {{ ::"Total Amount" | translate:"xdelivery" }}
            <span class="pull-right">
             {{carts.main.currency}}{{carts.main.total_amount}}
          </span>
        </div>
        <div class="item item-custom remove-border" ng-if="settings.enable_to_pickup || settings.enable_to_deliver">
           <p>{{ ::"Delivery Type" | translate:"xdelivery" }} : 
            <span class="pull-right delivery-type">
               {{carts.delivery}}
            </span>
          </p>
        </div>
      </ion-list>

      <ion-list ng-show="!is_loading" ng-if="is_allow_select_date">
        <div class="item item-divider item-divider-custom remove-border">
          {{ ::"Date to" | translate:"xdelivery" }}  {{carts.delivery | translate:"xdelivery" }}
        </div>
         <label class="item item-input item-custom item-select">
            <div class="input-label">
                {{ ::"Select Date" | translate:"xdelivery" }}*
              </div>
              <select ng-model="carts.delivery_date" ng-value="carts.delivery_date" ng-change="deliveryDateChange()">
              <option value="{{key}}" ng-value="{{key}}" ng-repeat="(key, value) in payout.dates">
                {{value}}
              </option>
              </select>
       </label>
      </ion-list>

      <ion-list ng-show="!is_loading" ng-if="is_allow_select_time">
        <div class="item item-divider item-divider-custom remove-border">
          {{ ::"Time to" | translate:"xdelivery" }}  {{ carts.delivery | translate:"xdelivery" }}
        </div>
         <label class="item item-input item-custom item-select">
            <div class="input-label">
                {{ ::"Select Time" | translate:"xdelivery" }}*
              </div>
              <select ng-model="carts.delivery_time"  ng-value="carts.delivery_time" >
                <option  ng-hide="((key < payout.current_time) && is_today)" ng-value="{{key}}" value="{{key}}" ng-repeat="(key, value) in payout.times">{{value}}</option>
              </select>
       </label>
      </ion-list>
      
     <ion-list ng-if="carts.delivery == 'delivery'" ng-show="!is_loading">
          <div class="item item-divider item-divider-custom remove-border"> {{ ::"Billing details" | translate:"xdelivery" }}
          </div>
          <ion-radio  ng-model="carts.address"
                      ng-value="address.id"
                      ng-show="(key == 0 || ((key > 0) && is_display_all_address))"
                      class="item-custom radio-custom"
                      ng-if="payout.address.length && !is_loading" ng-repeat="(key, address) in payout.address"> 
                       {{key+1}}. {{address.customer_name}}, {{address.phone_number}},<br>   {{address.address}}, <br>{{address.locality}}, {{address.city}}, <br>{{address.pincode}}
          </ion-radio>
        
          <p ng-if="payout.address.length > 1" class="text-right" ng-click="showHideAddress()">
           <i  class="icon icon-active-custom" ng-show="!is_display_all_address">{{ ::"More address" | translate:"xdelivery" }}</i>
          </p>

          
        <div class="item item-custom item-body remove-border" ng-if="!payout.address.length">
          <p class="text-center">
            {{ ::"Note" | translate:"xdelivery" }}: 
            {{ ::"You have not completed your address yet" | translate:"xdelivery" }}.
          </p>
          <p class="text-center" ng-click="addAddressModal()">
            <a class="icon icon-active-custom">
               {{ ::"Complete your address" | translate:"xdelivery" }}.
            </a> 
          </p>
        </div> 

    </ion-list>

     <ion-list ng-if="carts.delivery == 'pickup'" ng-show="!is_loading">
      <div class="item item-divider item-divider-custom remove-border">
        {{ ::"Billing details" | translate:"xdelivery" }}
      </div>
      <label class="item item-input item-custom item-floating-label">
          <span class="input-label">
              {{ ::"First name" | translate:"xdelivery" }}
              <span>*</span>
          </span>
          <input type="text" ng-model="carts.customer.firstname" placeholder="{{ forTranslate('Enter a First Name') }}">
      </label>

      <label class="item item-input item-custom item-floating-label">
          <span class="input-label">
              {{ ::"Last name" | translate:"xdelivery" }}
              <span>*</span>
          </span>
          <input type="text" ng-model="carts.customer.lastname" placeholder="{{ forTranslate('Enter a Last Name') }}">
      </label>

      <label class="item item-input item-custom item-floating-label">
          <span class="input-label">
              {{ ::"Phone" | translate:"xdelivery" }}
              <span>*</span>
          </span>
          <input type="text" ng-model="carts.customer.phone_number" placeholder="{{ forTranslate('Enter a Phone') }}">
      </label>

      <label class="item item-input item-custom item-floating-label">
          <span class="input-label">
              {{ ::"Email" | translate:"xdelivery" }}
              <span>*</span>
          </span>
          <input type="text" ng-model="carts.customer.email" placeholder="{{ forTranslate('Enter a Email') }}">
      </label>

    </ion-list>


     <div class="list" ng-show="!is_loading">
        <div class="item item-divider item-divider-custom remove-border">
          {{ ::"Additional information (Optional)" | translate:"xdelivery" }}
        </div>
        <label class="item item-input item-custom">
            <textarea ng-model="carts.order_note" ng-init="carts.order_note === ''" ng-value="" placeholder="{{ forTranslate('Enter a notes') }}"></textarea>
         </label>
      </div>

      <button class="button button-full button-positive-custom remove-border" ng-click="continueOrder()" ng-show="!is_loading">
            {{ ::"Continue" | translate:"xdelivery" }}
      </button>  
 
  
    </ion-content>

</ion-view>