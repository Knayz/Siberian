<ion-view sb-page-background
          class="xdelivery xdelivery-cart">

    <ion-nav-title>{{ ::"Cart" | translate:"xdelivery" }}</ion-nav-title>

    <ion-nav-buttons side="secondary"> 
		  <a class="button button-clear header-item" ui-sref="xdelivery-home({value_id: value_id})">
	       <i class="icon ion-home"></i>
	    </a> 
    </ion-nav-buttons>

    <ion-content class="has-header has-footer">

       <div class="loader" ng-show="is_loading">
         <ion-spinner class="spinner-custom"></ion-spinner>
      </div>

      <div class="list" ng-show="!is_loading">
         <div class="item item-divider item-divider-custom text-center remove-border" ng-if="!is_loading">
            <span class="pull-right">
            {{ ::"Total items" | translate:"xdelivery" }}: {{payout.total_item}}
          </span>
        </div>

      <div  ng-if="payout.cart_products.length" ng-repeat="product in payout.cart_products">
        <div class="item item-thumbnail-left item-custom xdelivery-product-item">
            <img  ng-src="{{ ProductImage(product.product_image) }}">
            <h2 class="list_product_name">{{ product.product_name }}</h2>
          <p  ng-if="!product.in_stock">
            <span class="icon-danger-custom badge-product-list">({{product.stock}})</span>
          </p>
          <p class="product_varients">
            <span ng-repeat="varient in product.varients">
               {{varient.attribute_name}} :  {{varient.value_name}},
            </span>
          </p>
         <p class="text-left product_price" ng-if="!product.active_special_price">{{payout.currency}} {{ product.price*product.cart_qty }} <span ng-if="product.sub_options_total > 0">
         + {{payout.currency}} {{product.sub_options_total}}</span>
          </p>
          <p class="text-left product_price" ng-if="product.active_special_price">{{payout.currency}} {{ product.special_price*product.cart_qty}} <del>{{ product.price*product.cart_qty }}</del>
            <span class="icon icon-danger-custom">({{product.offer_persent}}%)</span> <span ng-if="product.sub_options_total > 0"> + {{payout.currency}} {{product.sub_options_total}}</span>
          </p>
          <p class="product_options">{{product.options}}</p>
          <div class="row cart_qty_buttons">
            <div class="col col-40"></div>
            <div class="col col-20 text-center">
                <button ng-if="product.cart_qty > 1" ng-click="decreaseQuantity(product.product_id, product.cart_key)" class="button button-icon icon ion-minus-circled"></button>
                <button ng-if="product.cart_qty == 1" ng-click="decreaseQuantity(product.product_id, product.cart_key)" class="button button-icon icon ion-android-delete"></button>
              </div>
             <div class="col col-20 text-center">
                <input class="item item-input" type="text" name="qty" ng-value="{{product.cart_qty}}" ng-readonly="true">
             </div>
             <div class="col col-20 text-center">
                <button ng-click="increaseQuantity(product.product_id, product.cart_key, product.cart_qty)" class="button button-icon icon ion-plus-circled"></button>
            </div>
        </div>
      </div>
    </div>


     <div class="item item-custom item-body remove-border" ng-if="!payout.cart_products.length">
          <p class="text-center">
            {{ ::"No products in the cart" | translate:"xdelivery" }}.
          </p>
          <p class="text-center" style="margin-top: 20%;">
            <a ui-sref="xdelivery-home({value_id: value_id})" class="icon icon-active-custom" ng-if="!payout.cart_products.length">
               {{ ::"Continue shopping" | translate:"xdelivery" }}
            </a> 
          </p>
      </div> 

     
  </div>

  <div class="list" ng-if="payout.cart_products.length">
     <div class="item item-divider item-divider-custom remove-border">
            {{ ::"Order summary" | translate:"xdelivery" }}
     </div>
     <div class="item item-custom text-right">
          <span class="pull-left">
              {{ ::"Sub Total" | translate:"xdelivery" }} :
          </span>
           {{payout.currency}} {{payout.sub_amount}}
      </div>
      <div class="item item-custom text-right">
          <span class="pull-left">
              {{ ::"Taxes & Charges" | translate:"xdelivery" }} :
          </span>
           {{payout.currency}} {{payout.total_tax_amount}}
      </div>
      <div class="item item-custom text-right" style="font-weight: bold;">
          <span class="pull-left">
              {{ ::"Grand Total" | translate:"xdelivery" }} :
          </span>
           {{payout.currency}} {{payout.total_amount}}
      </div>
  </div>

    </ion-content>
   
   <div class="bar bar-footer bar-footer-custom" ng-if="!is_loading && payout.cart_products.length">
      <div class="row cart_footer">
          <div class="col col-50 text-center">
            <p class="text-center">
              {{ ::"Total" | translate:"xdelivery" }}: 
              <b>{{payout.currency}} {{payout.total_amount}}</b>
            </p>
          </div>
          <div class="col col-50">
            <button class="button button-full button-positive-custom" ng-disabled="payout.in_out_of_stock" ng-click="checkoutNow()">
               {{ ::"Checkout" | translate:"xdelivery" }}
            </button>
          </div>
      </div>
  </div>

</ion-view>