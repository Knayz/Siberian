<ion-view cache-view="false"
          class="eventpro eventpro-checkout"
          sb-page-background>
    <ion-nav-title> 
      <h1 class="title">{{ ::"Checkout" | translate:"eventpro" }} </h1>
    </ion-nav-title>

   <ion-content id="eventpro-content"
                 class="has-header">
        
      <div class="loader"
          ng-show="is_loading">
          <ion-spinner class="spinner-custom"></ion-spinner>
      </div>

      <div class="list" ng-if="!is_loading">
        <div class="item item-divider item-divider-custom remove-border">
          <h2>{{ ::'Order Summary' | translate:'eventpro' }}</h2>
        </div>
        <div class="item item-custom remove-border">
          {{ ::'Total Amount' | translate:'eventpro' }}
          <br>
          <i>{{carts.event.tickets_qty}}*{{carts.event.currency}}{{carts.event.price}}</i>
          <span class="pull-right"> 
              {{carts.event.currency}}{{carts.event.tickets_qty*carts.event.price}}
          </span>
        </div>
      </div>

      <div class="list" ng-if="!is_logged_in && !is_loading">
           <div class="item item-custom remove-border">
             <button class="button button-positive button-positive-custom button-full" ng-click="login()">
              {{ ::'LOGIN/SIGNUP NOW' | translate:'eventpro' }}
            </button>
        </div>
      </div>

      <div class="list" ng-if="is_logged_in && !is_loading">
        <div class="item item-divider item-divider-custom remove-border">
          <h2>{{ ::'Contact Information' | translate:'eventpro' }}</h2>
        </div>
        <label class="item item-input item-custom item-floating-label">
            <span class="input-label">
                {{ ::"First Name" | translate:"eventpro" }}
                <span>*</span>
            </span>
            <input type="text" placeholder="{{ forTranslate('Enter a First Name') }}*" ng-model="carts.customer.firstname">
         </label>

         <label class="item item-input item-custom item-floating-label">
            <span class="input-label">
                {{ ::"Last Name" | translate:"eventpro" }}
                <span>*</span>
            </span>
            <input type="text" placeholder="{{ forTranslate('Enter a Last Name') }}*" ng-model="carts.customer.lastname">
         </label>

         <label class="item item-input item-custom item-floating-label">
            <span class="input-label">
                {{ ::"Phone Number" | translate:"eventpro" }}
                <span>*</span>
            </span>
            <input type="text" placeholder="{{ forTranslate('Enter a Phone Number') }}*" ng-model="carts.customer.phone_number">
         </label>

         <label class="item item-input item-custom item-floating-label">
            <span class="input-label">
                {{ ::"Email" | translate:"eventpro" }}
                <span>*</span>
            </span>
            <input type="text" placeholder="{{ forTranslate('Enter a Email') }}*" ng-model="carts.customer.email">
         </label>
    </div>

    <div class="list" ng-if="is_logged_in && !is_loading && carts.event.price > 0 && (settings.enable_cod || settings.enable_online_payment)">      
      <div class="item item-divider item-divider-custom remove-border">
         <h2>{{ ::'Payment' | translate:'eventpro' }}</h2>
         <p>{{ ::'Choose a Payment Method' | translate:'eventpro' }}</p>
      </div>
  
      <div ng-repeat="method in gateways" ng-if="gateways.length > 0 && !is_loading">   
        <div class="item item-custom">
             <ion-radio class="remove-border" 
                        ng-value="method.gateway_code" 
                        ng-model="carts.payment_method">
                  <h2>{{method.lable_name}}</h2>
            </ion-radio>
            <p class="shot_description" 
                ng-if="method.shot_description" 
                ng-bind-html="method.shot_description | trusted_html"></p>
            <button ng-click="placeOrder()"
                    ng-if="method.gateway_code == carts.payment_method" 
                    ng-disabled="is_submiting"
                    id="eventpro_save_element"
                    class="button button-full button-positive-custom"
                    ng-disabled="((carts.payment_method === '' || carts.customer.phone_number === '' || carts.customer.email === '' || carts.customer.firstname === '' || carts.customer.lastname === '' ) ? true : false)">
                {{ ::"Pay Now" | translate:"ewallet" }}
              </button>
        </div>
      </div>

    </div>
 
</ion-content>
</ion-view>