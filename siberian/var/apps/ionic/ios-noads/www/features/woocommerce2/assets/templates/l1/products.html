<ion-view sb-page-background
          class="module-woocommerce products-view">

    <ion-nav-title>{{ pageTitle }}</ion-nav-title>

    <ion-nav-buttons side="secondary">
        <button class="button button-clear button-cart"
                ng-click="goTo('cart')">
            <i class="woo_font"
               ng-class="{
                'woo-shopping-cart-counter': getCartQuantity() > 0,
                'woo-shopping-cart': getCartQuantity() == 0
               }"></i>
            <span ng-if="getCartQuantity() > 0"
                  ng-click="goTo('cart')"
                  class="button button-clear woo-cart-quantity">{{ getCartQuantityText() }}</span>
        </button>
        <button class="button button-clear"
                ng-click="goTo('home')">
            <i class="woo_font woo-shop"></i>
        </button>
    </ion-nav-buttons>

    <ion-content>
        <div class="products-category-cartouche"
             ng-if="isCategory && category">
            <woo-categories root-callable="false"
                            all-categories="allCategories"
                            categories="[category]"></woo-categories>
        </div>

        <div class="woo-search-bar"
             ng-if="isSearch">
            <form ng-submit="reloadSearch()">
                <label class="item item-input">
                    <i class="icon ion-search placeholder-icon"></i>
                    <input type="text"
                           ng-model="search.terms"
                           placeholder="Search" />
                </label>
            </form>
        </div>

        <div class="list">
            <div ng-if="products.length > 0">
                <woo-products products="products"></woo-products>
            </div>

            <div class="padding">
                <div class="card"
                     ng-if="!isLoading && products.length === 0">
                    <div class="item item-custom item-text-wrap">
                        {{ ::'No products found.' | translate:'woocommerce2' }}
                    </div>
                </div>
            </div>

            <div class="text-center"
                 ng-if="isLoading">
                <ion-spinner icon="android"
                             class="spinner-custom"></ion-spinner>
                <p>{{ ::'Loading...' | translate:'woocommerce2' }}</p>
            </div>
        </div>

        <ion-infinite-scroll ng-if="hasMore && !isLoadingMore"
                             on-infinite="loadMoreProducts()"
                             immediate-check="false"
                             distance="10%"
                             class="spinner-custom"></ion-infinite-scroll>
    </ion-content>
</ion-view>
