angular.module('starter').controller('Woocommerce2CartController',function($scope,$translate,Woocommerce2Store){angular.extend($scope,Woocommerce2Store);$scope.getPageTitle=function(){return $translate.instant('Cart','woocommerce2')+' ('+$scope.getCurrentCart().quantity+')'}});angular.module('starter').controller('Woocommerce2CategoriesController',function($scope,$stateParams,$state,$translate,Woocommerce2Category,Woocommerce2Store){angular.extend($scope,Woocommerce2Store,{page_title:$translate.instant('Categories','woocommerce2'),isLoading:!1,allCategories:{},rootCategories:[]});$scope.loadContent=function(){$scope.isLoading=!0;Woocommerce2Category.nested().then(function(success){$scope.allCategories=success.categories;$scope.rootCategories=success.categories[0]},function(error){$scope.rootCategories=[]}).then(function(){$scope.isLoading=!1})};$scope.loadContent()});angular.module('starter').controller('Woocommerce2AccountController',function($scope,$ionicHistory,Customer,Woocommerce2Store){angular.extend($scope,Woocommerce2Store,{isReady:!1});if(!Customer.isLoggedIn()){$ionicHistory.goBack();Customer.loginModal();return}
$scope.getFullname=function(){return Customer.customer.firstname+' '+Customer.customer.lastname};$scope.getAvatar=function(){return Customer.getAvatarUrl()};$scope.getLoyalty=function(){return'Diamond member'};$scope.accountModal=function(){Customer.loginModal()};$scope.isReady=!0});angular.module('starter').controller('Woocommerce2HomeController',function($scope,$state,$stateParams,Woocommerce2Store,Woocommerce2Product,Woocommerce2Category){angular.extend($scope,Woocommerce2Store,{isReady:!1,featuredProducts:null,featuredCategories:null,search:{terms:null}});$scope.callSearch=function(){$state.go('woocommerce2-products',{value_id:$stateParams.value_id,search:$scope.search.terms})};$scope.storeIsReady().then(function(){$scope.isReady=!0;if($scope.getCurrentStore().featuredProducts>0){Woocommerce2Product.featured().then(function(success){$scope.featuredProducts=_.sampleSize(success.products,$scope.getCurrentStore().featuredProducts)},function(error){$scope.featuredProducts=[]})}
if($scope.getCurrentStore().featuredCategories>0){Woocommerce2Category.featured().then(function(success){$scope.featuredCategories=_.sampleSize(success.categories,$scope.getCurrentStore().featuredCategories)},function(error){$scope.featuredCategories=[]})}})});angular.module('starter').controller('Woocommerce2ProductController',function($scope,$stateParams,$state,$timeout,$translate,Dialog,Woocommerce2,Woocommerce2Store,Woocommerce2Product){angular.extend($scope,Woocommerce2Store,Woocommerce2Product,{pageTitle:null,isLoading:!0,isTogglingLike:!1,product:null,options:{variation_id:null,quantity:1},});$scope.lowPrice=function(){var prices=$scope.product.variations.map(function(variation){return variation.regular_price*1});return _.min(prices)};$scope.highPrice=function(){var prices=$scope.product.variations.map(function(variation){return variation.regular_price*1});return _.max(prices)};$scope.reviewerName=function(review){return[review.reviewer[0],'*'.repeat(review.reviewer.length-2),review.reviewer[review.reviewer.length-1]].join('').toUpperCase()};$scope.formatPrice=function(price,withCurrency){return Woocommerce2Store.formatPrice(price,withCurrency)};$scope.applyVariation=function(){console.log('applyVariation',$scope.options)};$scope.getVariation=function(){return _.find($scope.product.variations,{'id':$scope.options.variation_id*1})};$scope.hasVariationSelected=function(){return $scope.getVariation()!==undefined};$scope._currentPrice=function(){var currentPrice=$scope.product.price;if($scope.hasVariationSelected()){currentPrice=$scope.getVariation().price}
return currentPrice};$scope.currentPrice=function(){return $scope.formatPrice($scope._currentPrice(),!0)};$scope.currentPriceLine=function(){return $scope.formatPrice($scope._currentPrice()*$scope.options.quantity,!0)};$scope.textAttributes=function(){var names=$scope.product.attributes.map(function(variation){return variation.name});var slices=names.slice(0,2);if(names.length>3){slices.push($translate.instant('Etc...','woocommerce2'))}
return slices.join(', ')};$scope.textVariation=function(variation){var labels=variation.attributes.map(function(attribute){return attribute.option});return labels.join(' - ')};$scope.hasVariations=function(){return $scope.product.variations.length&&$scope.product.variations[0].attributes[0].option!==''};$scope.variationIsSelected=function(){if($scope.hasVariations()){return $scope.options.variation_id!==null}
return!0};$scope.iLike=function(){return $scope.getCurrentPreferences().likes.indexOf($scope.product.id)>=0};$scope.decreaseQuantity=function(){if($scope.options.quantity-1>0){$scope.options.quantity-=1}};$scope.increaseQuantity=function(){$scope.options.quantity+=1};$scope.toggleLike=function(){if(!$scope.isTogglingLike){Woocommerce2Product.toggleLike($scope.product.id).then(function(success){}).then(function(){$timeout(function(){$scope.isTogglingLike=!1},500)})}};$scope.addToCart=function(){if(!$scope.variationIsSelected()){Dialog.alert('Variation','Please select a variation.','OK',2350,'woocommerce2')}else if($scope.options.quantity<=0){Dialog.alert('Quantity','You must order at least 1 product.','OK',2350,'woocommerce2')}else{var cartProduct=angular.copy($scope.product);cartProduct._localCart=angular.copy($scope.options);$scope.updateCart(cartProduct)}};$scope.loadContent=function(){Woocommerce2Product.details($scope.productId).then(function(success){$scope.product=success.product;$scope.productBlock={gallery:$scope.product.images,allow_line_return:!0};$scope.productGallery=$scope.product.images},function(error){}).then(function(){$scope.isLoading=!1})};$scope.loadContent()});angular.module('starter').controller('Woocommerce2ProductsController',function($scope,$state,$stateParams,$timeout,$translate,Woocommerce2Store,Woocommerce2Product,Woocommerce2Category){angular.extend($scope,Woocommerce2Store,{isLoading:!0,pageTitle:$translate.instant('All products','woocommerce2'),products:[],hasMore:!1,isLoadingMore:!1,isCategory:$stateParams.category_id!==undefined,isSearch:$stateParams.search!==undefined&&$stateParams.search.length,categoryId:$stateParams.category_id!==undefined?$stateParams.category_id:null,allCategories:{},category:null,search:{terms:$stateParams.search!==undefined?$stateParams.search:null}});$scope.reloadSearch=function(){$scope.products=[];$scope.loadContent()};$scope.loadContent=function(){$scope.isLoading=!0;if($scope.isCategory){Woocommerce2Category.nested().then(function(success){$scope.allCategories=success.categories;$scope.category=_.find(success.allCategories,{id:parseInt($scope.categoryId,10)});$scope.pageTitle=$scope.category.name},function(error){$scope.category=[]})}
Woocommerce2Product.all($scope.products.length,$scope.categoryId,$scope.search.terms).then(function(payload){var payloadProducts=Object.values(payload.products);$scope.products=$scope.products.concat(payloadProducts);$scope.hasMore=payloadProducts.length>0},function(error){$scope.products=[]}).then(function(){$scope.isLoading=!1})};$scope.loadMoreProducts=function(){if(!$scope.isLoadingMore){$scope.isLoading=!0;$scope.isLoadingMore=!0;Woocommerce2Product.all($scope.products.length,$scope.categoryId,$scope.search.terms).then(function(payload){var payloadProducts=Object.values(payload.products);$scope.products=$scope.products.concat(payloadProducts);$scope.hasMore=payloadProducts.length>0;$timeout(function(){$scope.$broadcast('scroll.infiniteScrollComplete')},500)}).then(function(){$scope.isLoadingMore=!1;$scope.isLoading=!1})}};$scope.loadContent()});angular.module('starter').directive('wooSlider',function(){return{restrict:'E',scope:{images:'=',options:'=?'},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-slider.html',controller:function($ionicGesture,$scope,$state,$stateParams){$scope.carouselIndex=0;$scope.callToAction=function(image){if(image.category){$state.go('woocommerce2-category',{value_id:$stateParams.value_id,category_id:image.category})}};$scope.getImageSrc=function(image){if(image&&image.src){if(image.src.indexOf('/')===0){return IMAGE_URL+'/images/application'+image.src}
if(image.src.indexOf('https://')===0){return image.src}}
return IMAGE_URL+'/app/local/modules/Woocommerce2/features/woocommerce2/assets/images/placeholders/no-image-promotion.png'}}}});angular.module('starter').directive('wooProducts',function(){return{restrict:'EA',scope:{products:'=',valueId:'='},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-product.html',controller:function($scope,Woocommerce2Store,Woocommerce2Product){angular.extend($scope,Woocommerce2Store,Woocommerce2Product);$scope.showProduct=function(product){Woocommerce2Product.openModal(product)}}}});angular.module('starter').directive('wooProductsMini',function(){return{restrict:'EA',scope:{products:'=',valueId:'='},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-product-mini.html',controller:function($scope,Woocommerce2Store,Woocommerce2Product){angular.extend($scope,Woocommerce2Store,Woocommerce2Product);$scope.showProduct=function(product){Woocommerce2Product.openModal(product)}}}});angular.module('starter').directive('wooProductsCart',function(){return{restrict:'EA',scope:{products:'='},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-product-cart.html',controller:function($scope,$translate,Dialog,Woocommerce2Product,Woocommerce2Store){angular.extend($scope,Woocommerce2Store,Woocommerce2Product);$scope.decreaseLock=!1;$scope.taxesText=function(){return $translate.instant($scope.withTaxes()?'(TTC)':'(HT)','woocommerce2')};$scope.increaseQuantity=function(product){product._localCart.quantity=product._localCart.quantity+1;Woocommerce2Store.updateQuantity()};$scope.decreaseQuantity=function(product,index){if($scope.decreaseLock){return}
if(product._localCart.quantity-1<=0){$scope.decreaseLock=!0;Dialog.confirm('Quantity','Do you want to remove this product from your cart?',['Yes','No'],'text-center','woocommerce2').then(function(result){if(result){Woocommerce2Store.getCurrentCart().products.splice(index,1);Woocommerce2Store.updateQuantity()}
$scope.decreaseLock=!1})}else{product._localCart.quantity=product._localCart.quantity-1;Woocommerce2Store.updateQuantity()}};$scope._currentPrice=function(product){var currentPrice=product.price;if($scope.hasVariation(product)){currentPrice=$scope.getVariation(product).price}
return currentPrice};$scope.currentPrice=function(product){return $scope.formatPrice($scope._currentPrice(product),!0)};$scope.currentPriceLine=function(product){return $scope.formatPrice($scope._currentPrice(product)*product._localCart.quantity,!0)};$scope.textRating=function(product){var tmpRating=parseFloat(product.average_rating).toFixed(1);return tmpRating%1===0?parseInt(tmpRating,10).toString():tmpRating.toString()};$scope.getTotal=function(){var total=0;for(var i=0;i<$scope.products.length;i++){var product=$scope.products[i];var currentPrice=product.price;if($scope.hasVariation(product)){currentPrice=$scope.getVariation(product).price}
total+=currentPrice*1*product._localCart.quantity}
return $scope.formatPrice(total,!0)};$scope.showProduct=function(product){$scope.openModal(product)}}}});angular.module('starter').directive('wooRating',function(){var createHTML=function(r){var html='';var count=0;while(r-->=1){html+='<i class="icon ion-android-star"> </i>';count++}
if(r>=-.5){html+='<i class="icon ion-android-star-half"> </i>';count++}
for(var i=0;i<(5-count);i++)
html+='<i class="icon ion-android-star-outline"> </i>';return html};return{restrict:'EA',scope:{rating:'='},link:function(scope,elem,attr){scope.$watch('rating',function(newValue,oldValue,scope){if(typeof newValue=='string')
elem.html(createHTML(parseFloat(newValue)));else elem.html(createHTML(newValue))})}}});angular.module('starter').directive('wooCategories',function(){return{restrict:'E',scope:{allCategories:'=',categories:'=',rootCallable:'=?',},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-categories.html',link:function(scope){if(scope.rootCallable===undefined){scope.rootCallable=!0}},controller:function($scope){$scope.categoryHasChildren=function(categoryId){return $scope.allCategories.hasOwnProperty(parseInt(categoryId))}}}});angular.module('starter').directive('wooCategoriesMini',function(){return{restrict:'EA',scope:{categories:'=?'},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-categories-mini.html',controller:function($scope,$state,$stateParams){$scope.categorySrc=function(category){if(category.image&&category.image.src){return category.image.src}
return'./features/woocommerce2/assets/images/placeholders/no-image-512.png'};$scope.showCategory=function(category){$state.go('woocommerce2-category',{value_id:$stateParams.value_id,category_id:category.id,})}}}});angular.module('starter').directive('wooCategory',function(){return{restrict:'E',scope:{category:'=',isCallable:'=?'},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-category.html',link:function(scope){if(scope.isCallable===undefined){scope.isCallable=!0}},controller:function($scope,$state,$stateParams){$scope.categorySrc=function(category){if(category.image&&category.image.src){return category.image.src}
return'./features/woocommerce2/assets/images/placeholders/no-image-512.png'};$scope.showCategory=function(categoryId){$state.go('woocommerce2-category',{value_id:$stateParams.value_id,category_id:categoryId})}}}});angular.module('starter').directive('wooCategoryChild',function(){return{restrict:'E',scope:{allCategories:'=',parent:'='},templateUrl:'./features/woocommerce2/assets/templates/l1/directives/woo-category-child.html',controller:function($scope,$state,$stateParams){$scope.categorySrc=function(category){if(category.image&&category.image.src){return category.image.src}
return'./features/woocommerce2/assets/images/placeholders/no-image-512.png'};$scope.categoryChildren=function(categoryId){return $scope.allCategories[categoryId]};$scope.showCategory=function(categoryId){$state.go('woocommerce2-category',{value_id:$stateParams.value_id,category_id:categoryId})}}}});angular.module('starter').factory('Woocommerce2',function($q,$rootScope,$pwaRequest){var factory={};factory.value_id=null;factory.loadContent=function(){return $pwaRequest.get('woocommerce2/mobile_view/load',{urlParams:{value_id:this.value_id}})};factory.execWooQuery=function(action_call){return $pwaRequest.post('woocommerce2/mobile_view/gethierarchicalcategories',{urlParams:{value_id:this.value_id},data:{action_call:action_call}})};factory.getCategoriesHierarchical=function(){return $pwaRequest.get('woocommerce2/mobile_view/gethierarchicalcategories',{urlParams:{value_id:this.value_id}})};factory.getAllProducts=function(page,category,product_id){return $pwaRequest.get('woocommerce2/mobile_view/getallproducts',{urlParams:{value_id:this.value_id,page:page,category:category,product_id:product_id}})};factory.getProduct=function(product_id){return $pwaRequest.get('woocommerce2/mobile_view/getproduct',{urlParams:{value_id:this.value_id,id:product_id}})};factory.getCategoryDetails=function(category_id,page){return $pwaRequest.get('woocommerce2/mobile_view/getcategorydetails',{urlParams:{value_id:this.value_id,id:category_id,page:page}})};factory.createCustomer=function(customer){return $pwaRequest.post('woocommerce2/mobile_view/createcustomer',{urlParams:{value_id:this.value_id},data:{customer:JSON.stringify(customer)}})};factory.checkCustomer=function(mail){return $pwaRequest.get('woocommerce2/mobile_view/checkcustomer',{urlParams:{value_id:this.value_id,mail:mail}})};factory.createOrder=function(order){return $http({method:'GET',url:Url.get("woocommerce2/mobile_view/createorder",{value_id:this.value_id,order:JSON.stringify(order)}),cache:!1,responseType:'json'})};factory.getGroupedDetails=function(parent_id){return $http({method:'GET',url:Url.get("woocommerce2/mobile_view/groupeddetails",{value_id:this.value_id,parent_id:parent_id}),cache:!1,responseType:'json'})};factory.payByStripe=function(card_token,order){return $http({method:'POST',url:Url.get("woocommerce2/mobile_view/paybycreditcard"),data:{value_id:this.value_id,token:JSON.stringify(card_token),order:JSON.stringify(order)},cache:!1,responseType:'json'})};factory.getPaypalUrl=function(order){return $http({method:'POST',url:Url.get("woocommerce2/mobile_view/getpaypalurl"),data:{value_id:this.value_id,order:JSON.stringify(order)},cache:!1,responseType:'json'})};return factory});angular.module('starter').factory('Woocommerce2Category',function($q,$stateParams,$rootScope,$pwaRequest){var factory={storage:[],featured:[]};factory.nested=function(){if(factory.storage.hasOwnProperty($stateParams.value_id)){return $pwaRequest.resolve(factory.storage[$stateParams.value_id])}
var promise=$pwaRequest.get('woocommerce2/mobile_category/nested',{urlParams:{value_id:$stateParams.value_id}});promise.then(function(success){factory.storage[$stateParams.value_id]=success});return promise};factory.featured=function(){var flatId=$stateParams.value_id;if(factory.featured.hasOwnProperty(flatId)){return $pwaRequest.resolve(factory.featured[flatId])}
var promise=$pwaRequest.get('woocommerce2/mobile_category/featured',{urlParams:{value_id:$stateParams.value_id}});promise.then(function(success){factory.featured[flatId]=success});return promise};factory.details=function(categoryId,page){return $pwaRequest.get('woocommerce2/mobile_category/details',{urlParams:{value_id:$stateParams.value_id,id:categoryId,page:page}})};return factory});angular.module('starter').factory('Woocommerce2Customer',function($q,$stateParams,$rootScope,$pwaRequest){var factory={};factory.sync=function(customer){return $pwaRequest.post('woocommerce2/mobile_customer/sync',{urlParams:{value_id:$stateParams.value_id},data:{customer:JSON.stringify(customer)}})};factory.saveCart=function(cart){return $pwaRequest.post('woocommerce2/mobile_customer/save-cart',{urlParams:{value_id:$stateParams.value_id},data:{cart:cart}})};return factory});angular.module('starter').factory('Woocommerce2Order',function($q,$rootScope,$pwaRequest){var factory={};factory.value_id=null;factory.create=function(order){return $pwaRequest.post('woocommerce2/mobile_order/create',{urlParams:{value_id:this.value_id},data:{order:JSON.stringify(order)}})};factory.validate=function(order){return $pwaRequest.post('woocommerce2/mobile_order/validate',{urlParams:{value_id:this.value_id},data:{order:JSON.stringify(order)}})};return factory});angular.module('starter').factory('Woocommerce2Product',function($q,$stateParams,$rootScope,$pwaRequest,$timeout,Modal,Woocommerce2Store){var factory={storage:[],featured:[],modals:[]};factory.all=function(offset,categoryId,search){return $pwaRequest.get('woocommerce2/mobile_product/all',{urlParams:{value_id:$stateParams.value_id,offset:offset,category_id:categoryId,search:search}})};factory.featured=function(){var flatId=$stateParams.value_id;if(factory.featured.hasOwnProperty(flatId)){return $pwaRequest.resolve(factory.featured[flatId])}
var promise=$pwaRequest.get('woocommerce2/mobile_product/featured',{urlParams:{value_id:$stateParams.value_id}});promise.then(function(success){factory.featured[flatId]=success});return promise};factory.details=function(productId){var flatId=$stateParams.value_id+'_'+productId;if(factory.storage.hasOwnProperty(flatId)){return $pwaRequest.resolve(factory.storage[flatId])}
var promise=$pwaRequest.get('woocommerce2/mobile_product/details',{urlParams:{value_id:$stateParams.value_id,product_id:productId}});promise.then(function(success){factory.storage[flatId]=success});return promise};factory.toggleLike=function(productId){var promise=$pwaRequest.get('woocommerce2/mobile_product/toggle-like',{urlParams:{value_id:$stateParams.value_id,product_id:productId}});promise.then(function(success){$timeout(function(){Woocommerce2Store.getCurrentPreferences().likes=success.likes})});return promise};factory.discountAmount=function(product){var price=parseFloat(product.price*1);var regularPrice=parseFloat(product.regular_price*1);if(regularPrice===0){regularPrice=1}
return Math.round(100-((price/regularPrice)*100))};factory.isSale=function(product){var price=parseFloat(product.price*1);var regularPrice=parseFloat(product.regular_price*1);if(regularPrice===0){return!1}
return price!==regularPrice};factory.textRating=function(product){var tmpRating=parseFloat(product.average_rating).toFixed(1);return tmpRating%1===0?parseInt(tmpRating,10).toString():tmpRating.toString()};factory.getVariation=function(product){return _.find(product.variations,{'id':product._localCart.variation_id*1})};factory.hasVariation=function(product){return factory.getVariation(product)!==undefined};factory.textVariation=function(product){var labels=factory.getVariation(product).attributes.map(function(attribute){return attribute.option});return labels.join(',')};factory.openModal=function(product){var flatId=$stateParams.value_id+'_'+product.id;Modal.fromTemplateUrl('features/woocommerce2/assets/templates/l1/modals/modal-product.html',{scope:angular.extend($rootScope.$new(!0),{close:function(){factory.modals[flatId].remove()},productId:product.id,flatId:flatId}),animation:'slide-in-right-left'}).then(function(modal){factory.modals[flatId]=modal;factory.modals[flatId].show();return modal})};return factory});angular.module('starter').factory('Woocommerce2Store',function($q,$rootScope,$state,$stateParams,$pwaRequest,$translate,Application,Customer,LinkService,Woocommerce2Customer){var factory={stores:[],carts:[],preferences:[],storesReady:[],dummyStore:{name:$translate.instant('Loading...','woocommerce2'),card_design:!1,carousel:[],carouselOptions:{lineReturn:!0}},dummyCart:{quantity:0,total:0,products:[],coupons:[]},dummyPreference:{likes:[]}};factory.goTo=function(state){$state.go('woocommerce2-'+state,{value_id:$stateParams.value_id})};factory.backButtonIcon=function(){return Application.getBackIcon()};factory.isLoggedIn=function(){return Customer.isLoggedIn()};factory.myAccount=function(){Customer.loginModal()};factory.openLink=function(url){LinkService.openLink(url,{},!0)};factory.withTaxes=function(){return factory.getCurrentStore().settings.woocommerce_calc_taxes==='yes'};factory.applyTaxes=function(price){var withTax=factory.getCurrentStore().settings.woocommerce_calc_taxes==='yes';if(withTax){var taxRate=factory.getCurrentStore().tax.rate*1;return price*(1+(taxRate/100))}
return price};factory.formatPrice=function(price,withCurrency){var store=factory.getCurrentStore();var settings=store.settings;var taxedPrice=factory.applyTaxes(price*1);var formattedPrice=taxedPrice.toFixed(settings.woocommerce_price_num_decimals*1).replace(/\d(?=(\d{3})+\.)/g,'$&'+settings.woocommerce_price_thousand_sep).replace('.',settings.woocommerce_price_decimal_sep);if(withCurrency===!0){if(settings.woocommerce_currency_pos==='right'){formattedPrice=formattedPrice+''+store.currency.symbol}else{formattedPrice=store.currency.symbol+' '+formattedPrice}}
return formattedPrice};factory.getCurrency=function(){return factory.getCurrentStore().currency.symbol};factory.getCurrentStore=function(){var flatId=$stateParams.value_id;if(factory.stores.hasOwnProperty(flatId)){return factory.stores[flatId]}
return factory.dummyStore};factory.getCurrentCart=function(){var flatId=$stateParams.value_id;if(factory.carts.hasOwnProperty(flatId)){return factory.carts[flatId]}
return factory.dummyCart};factory.updateCart=function(product){var sameInCartIndex=_.findIndex(factory.getCurrentCart().products,function(_item){return _item.id===product.id&&_item._localCart.variation_id===product._localCart.variation_id});if(sameInCartIndex!==-1){factory.getCurrentCart().products[sameInCartIndex]._localCart.quantity+=product._localCart.quantity}else{factory.getCurrentCart().products.unshift(product)}
factory.updateQuantity()};factory.updateQuantity=function(){factory.getCurrentCart().quantity=factory.getCurrentCart().products.reduce(function(accumulation,currentItem){return accumulation+currentItem._localCart.quantity},0);Woocommerce2Customer.saveCart(factory.getCurrentCart())};factory.getCurrentPreferences=function(){var flatId=$stateParams.value_id;if(factory.preferences.hasOwnProperty(flatId)){return factory.preferences[flatId]}
return factory.dummyPreference};factory.getCommerceName=function(){return factory.getCurrentStore().name};factory.getCartQuantity=function(){return factory.getCurrentCart().quantity};factory.getCartQuantityText=function(){var currentQuantity=factory.getCartQuantity();return currentQuantity<100?currentQuantity:'99+'};factory.getCardDesign=function(){return factory.getCurrentStore().card_design};factory.load=function(){var flatId=$stateParams.value_id;if(!factory.storesReady.hasOwnProperty(flatId)){factory.storesReady[flatId]=$q.defer()}
if(factory.stores.hasOwnProperty(flatId)){return $pwaRequest.resolve(factory.stores[flatId])}
var promise=$pwaRequest.get('/woocommerce2/mobile_store/load',{urlParams:{value_id:$stateParams.value_id}});$pwaRequest.get('/woocommerce2/mobile_customer/preferences',{urlParams:{value_id:$stateParams.value_id}}).then(function(success){factory.preferences[flatId]=success.preferences;factory.carts[flatId]=success.cart});promise.then(function(success){factory.stores[flatId]=success.store;factory.storesReady[flatId].resolve()});return promise};factory.storeIsReady=function(){var flatId=$stateParams.value_id;if(!factory.storesReady.hasOwnProperty(flatId)){factory.load()}
return factory.storesReady[flatId].promise};factory.load();return factory});Features.insertCSS(":root{--safe-area-inset-top:0;--safe-area-inset-right:0;--safe-area-inset-bottom:0;--safe-area-inset-left:0}@supports (padding-top:constant(safe-area-inset-top)){:root{--safe-area-inset-top:constant(safe-area-inset-top);--safe-area-inset-right:constant(safe-area-inset-right);--safe-area-inset-bottom:constant(safe-area-inset-bottom);--safe-area-inset-left:constant(safe-area-inset-left)}}@supports (padding-top:env(safe-area-inset-top)){:root{--safe-area-inset-top:env(safe-area-inset-top);--safe-area-inset-right:env(safe-area-inset-right);--safe-area-inset-bottom:env(safe-area-inset-bottom);--safe-area-inset-left:env(safe-area-inset-left)}}.platform-overview.platform-cordova{--safe-area-inset-top:1.5em;--safe-area-inset-right:0;--safe-area-inset-bottom:.5em;--safe-area-inset-left:0}.module-woocommerce.cart-view .total{font-weight:700}.module-woocommerce.cart-view .cart-item-image{background-size:contain;border-radius:4px;top:8px;left:8px}.module-woocommerce.cart-view .button-quantity{border:0;border-radius:50%;width:24px;height:24px;font-size:14px;line-height:14px;background-color:#444;color:#fff}.module-woocommerce.cart-view .text-quantity{height:24px;font-size:15px;margin:0 8px}.module-woocommerce.cart-view .item h2{font-weight:400}.module-woocommerce .root-category{padding-top:16px;padding-bottom:16px;padding-left:68px}.module-woocommerce .root-category>img:first-child{top:13px;left:12px;max-width:48px;max-height:48px;box-shadow:0 0 3px grey;border-radius:3px}.module-woocommerce .child-category{padding-left:68px}.module-woocommerce .child-category>img:first-child{top:14px;left:18px;max-width:36px;max-height:36px;box-shadow:0 0 3px grey;border-radius:3px}.module-woocommerce .category-title{line-height:40px;font-weight:700;font-size:18px}.module-woocommerce .category-title.has-description{line-height:20px!important}.module-woocommerce .subcategory-title{line-height:36px;font-weight:700;font-size:14px}.module-woocommerce .subcategory-title.has-description{line-height:18px!important}.module-woocommerce.categories-view .text-justify{text-align:justify}.module-woocommerce.categories-view .row+.row{margin-top:5px}.module-woocommerce.categories-view .uppercase{text-transform:uppercase}.module-woocommerce.categories-view .categ-title{padding:5px 0 0 5px}.module-woocommerce.categories-view .cart-badge{background-color:#f44336;color:#fff}.module-woocommerce.categories-view .full-image{display:block}.module-woocommerce.category-view .text-justify{text-align:justify}.module-woocommerce.category-view .row+.row{margin-top:5px}.module-woocommerce.category-view .uppercase{text-transform:uppercase}.module-woocommerce.category-view .categ-title{padding:5px 0 0 5px}.module-woocommerce.category-view .product-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:5px}.module-woocommerce.category-view .product-price{padding:5px}.module-woocommerce.category-view .product-price .product-name{padding:0}.module-woocommerce.category-view .card{margin:0;position:relative;padding-top:0}.module-woocommerce.category-view .sale-badge{font-size:50px;position:absolute;right:15px;top:-15px;color:#ffc107}.module-woocommerce.category-view .out-of-stock{font-size:.85em;width:100%;position:absolute;top:0;color:#fff;background-color:rgba(255,0,0,.75);text-transform:uppercase;font-weight:700}.module-woocommerce.category-view .bead-step{float:left;font-size:10px;padding:2px;padding-right:30px}.module-woocommerce.category-view .bead-step .ion-chevron-right{font-size:15px;right:0}.module-woocommerce.category-view .bead-container{position:relative;margin-top:5px}.module-woocommerce.category-view .cart-badge{background-color:#f44336;color:#fff}.module-woocommerce.customer-view .cart-badge{background-color:#f44336;color:#fff}.module-woocommerce.customer-view .error{font-size:12px;color:#f00!important}.module-woocommerce.home-view .home-featured{padding:0 10px;margin:0}.module-woocommerce.home-view .categories-featured{padding:16px 10px 0 10px;margin:0}.module-woocommerce.home-view .links-featured{padding:0 10px;margin:16px 0 10px 0}.module-woocommerce.home-view .cart-badge-home{background-color:#f44336;color:#fff;position:absolute;right:35%!important;z-index:999;top:10px!important}.module-woocommerce.home-view .shop-icons.shop-icon-products i.woo_font{background-color:#886aea;padding:13px 13px 9px 10px;border-radius:50%;color:#fff}.module-woocommerce.home-view .shop-icons.shop-icon-categories i.woo_font{background-color:#886aea;padding:11px 11px 11px 11px;border-radius:50%;color:#fff}.module-woocommerce.home-view .shop-icons.shop-icon-account i.woo_font{background-color:#886aea;padding:11px 11px 11px 11px;border-radius:50%;color:#fff}.module-woocommerce.home-view .shop-icons.shop-icon-orders i.woo_font{background-color:#886aea;padding:11px 14px 11px 14px;border-radius:50%;color:#fff}.module-woocommerce.home-view .social-icon.social-icon-webshop i.woo_font{background-color:#886aea;padding:11px 14px 11px 14px;border-radius:50%;color:#fff}.module-woocommerce.home-view .social-icon.social-icon-twitter i.woo_font{background-color:#00a5ee;padding:8px 14px 4px 16px;border-radius:50%;font-size:46px;color:#fff}.module-woocommerce.home-view .social-icon.social-icon-facebook i.woo_font{color:#fff;font-size:58px}.module-woocommerce.home-view .social-icon.social-icon-instagram i.woo_font{background-color:#fe0074;padding:12px 12px 12px 12px;border-radius:50%;font-size:34px;color:#fff}.module-woocommerce .modal-loading-offset{margin-top:calc(var(--safe-area-inset-top) + 44px)}.module-woocommerce.product-view .product-rating{font-size:16px}.module-woocommerce.product-view .product-rating i.icon{font-size:18px}.module-woocommerce.product-view .product-like{font-size:28px}.module-woocommerce.product-view .like-active{color:#9c1912}.module-woocommerce.product-view .like-inactive{color:#696969}.module-woocommerce.product-view .product-price{font-size:17px;font-weight:700;margin-bottom:15px}.module-woocommerce.product-view .product-description{font-size:16px;margin-bottom:15px}.module-woocommerce.product-view .product-description *{font-size:16px}.module-woocommerce.product-view .product-regular-price{min-height:20px;font-size:12px;margin-bottom:0}.module-woocommerce.product-view .product-regular-price .product-regular-price-1{text-decoration:line-through;color:#777}.module-woocommerce.product-view .product-regular-price .product-discount-amount{color:rgba(239,71,58,.9);background-color:rgba(239,71,58,.2);border-radius:2px;padding:1px 3px}.module-woocommerce.product-view .product-sale-badge{color:#fff;background-color:rgba(239,71,58,.9);border-radius:2px;padding:2px 4px 2px;font-size:14px;transform:translateY(-1px);display:inline-block;height:16px;line-height:14px}.module-woocommerce.product-view .product-text-rating{font-size:12px;transform:translateY(-2px);display:inline-block;margin-right:6px}.module-woocommerce.product-view .sale-badge{font-size:50px;position:absolute;right:15px;top:-15px;color:#ffc107}.module-woocommerce.product-view .item.item-image-gallery{height:50vh!important}.module-woocommerce.product-view .sb-cms-image ul[rn-carousel] li>div{height:100%!important}.module-woocommerce.product-view .list{margin-bottom:8px}.module-woocommerce.product-view .woo-cart-quantity{margin-left:5px}.module-woocommerce.product-view ion-header-bar{background:transparent;border:0;text-shadow:1px 1px 2px grey}.module-woocommerce.product-view ion-header-bar i.icon:before{text-shadow:1px 1px 2px grey}.module-woocommerce.product-view ion-header-bar .woo_font:before{text-shadow:1px 1px 2px grey}.module-woocommerce.product-view ion-content{top:0!important;bottom:44px!important}.module-woocommerce.product-view ion-footer-bar{padding:0;border:0;box-shadow:0 0 7px grey}.module-woocommerce.product-view ion-footer-bar button{border:0;margin:0}.module-woocommerce.product-view ion-footer-bar button.button-add-to-cart{text-transform:uppercase;font-size:16px;font-weight:700;letter-spacing:1px;width:calc(100vw - 152px)}.module-woocommerce.product-view ion-footer-bar .action-quantity-container{width:152px;overflow:hidden;display:flex}.module-woocommerce.product-view ion-footer-bar .action-quantity{width:44px;height:44px;display:inline-block;font-size:26px;line-height:26px;padding:0;padding-bottom:6px}.module-woocommerce.product-view ion-footer-bar .item-quantity{width:64px;height:44px;display:inline-block;font-size:18px;line-height:18px;text-align:center;padding:0}.module-woocommerce.product-view ion-footer-bar .item-quantity::-webkit-outer-spin-button,.module-woocommerce.product-view ion-footer-bar .item-quantity::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.module-woocommerce.product-view ion-footer-bar .item-quantity[type=number]{-moz-appearance:textfield}.module-woocommerce.products-view .products-category-cartouche{padding:5px 5px 0 5px}.module-woocommerce.products-view .full-image{display:block}.module-woocommerce.products-view .category-name,.module-woocommerce.products-view .product-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:0;margin:0;text-align:left;font-size:13px;font-weight:400}.module-woocommerce.products-view .category-name-block{padding:4px 6px}.module-woocommerce.products-view .product-price{padding:0 6px;padding-top:3px;text-align:left;border:0}.module-woocommerce.products-view .product-price-current{font-weight:700;font-size:15px;margin-bottom:2px}.module-woocommerce.products-view .row-product-mini{padding:0 5px}.module-woocommerce.products-view .row-category-mini{padding:0 5px}.module-woocommerce.products-view .category-title-mini,.module-woocommerce.products-view .product-title-mini{display:block;background-size:cover}.module-woocommerce.products-view .product-sale-badge{color:#fff;background-color:rgba(239,71,58,.9);border-radius:2px;padding:2px 3px 1px;font-size:10px;transform:translateY(-2px);display:inline-block;height:14px;line-height:10px}.module-woocommerce.products-view .product-rating{padding:0;border:0;color:#777;font-size:12px}.module-woocommerce.products-view .product-rating.product-rating-mini{position:absolute;bottom:42px;right:6px}.module-woocommerce.products-view .product-rating i.icon{color:#ef473a;font-size:14px;margin-right:2px}.module-woocommerce.products-view .product-regular-price{min-height:20px;font-size:12px;margin-bottom:0}.module-woocommerce.products-view .product-regular-price .product-regular-price-1{text-decoration:line-through;color:#777}.module-woocommerce.products-view .product-regular-price .product-discount-amount{color:rgba(239,71,58,.9);background-color:rgba(239,71,58,.2);border-radius:2px;padding:1px 3px}.module-woocommerce.products-view .card{margin:0;position:relative;padding-top:0}.module-woocommerce.products-view .sale-badge{font-size:50px;position:absolute;right:15px;top:-15px;color:#ffc107}.module-woocommerce.products-view .out-of-stock{font-size:11px;width:100%;position:absolute;text-transform:uppercase;font-weight:700;top:0;color:#fff;background-color:rgba(239,71,58,.9)}.module-woocommerce.products-view .cart-badge{background-color:#f44336;color:#fff}.module-woocommerce.account-view .account-item-spacer{height:32px}.module-woocommerce.account-view .list-account-items .item.item-custom{border:0;margin:0}.module-woocommerce.account-view .card-favorites .row{box-shadow:0 0 3px grey;border-radius:8px;text-align:center}.module-woocommerce.account-view .card-favorites .row i{font-size:32px;margin-bottom:6px;margin-top:4px}.module-woocommerce.account-view .customer-block{padding-top:12px;min-height:88px;display:flex;flex-direction:column;justify-content:center}.module-woocommerce.account-view .customer-block h2{font-size:20px;font-weight:700}.module-woocommerce.account-view .customer-block .account-item-image{max-height:64px;max-width:64px;background-size:cover;border-radius:50%;box-shadow:0 0 3px grey}.module-woocommerce .woo-search-bar{margin:10px}.module-woocommerce .woo-search-bar .item-input{border-radius:30px;border:0;box-shadow:0 1px 3px rgba(0,0,0,.3);height:32px}.module-woocommerce .woo-search-bar .item-input input{padding-top:0!important}.module-woocommerce .woo-slider-container{height:22vh;margin:10px;border-radius:5px;overflow:hidden}.module-woocommerce .woo-slider-container.slider-home{box-shadow:0 1px 3px rgba(0,0,0,.3)}.module-woocommerce .woo-slider-container-product{height:50vh;margin:0;overflow:hidden}.module-woocommerce [woo-slider]{height:100%}.module-woocommerce.woo-slider{height:100%;padding:0!important}.module-woocommerce.woo-slider ul[rn-carousel]{height:100%}.module-woocommerce.woo-slider ul[rn-carousel] li>div{height:100%;background-size:cover;background-repeat:no-repeat}.module-woocommerce.woo-slider div[rn-carousel-indicators]{text-align:center;background-color:transparent;position:relative;left:0;right:0;bottom:20px}.module-woocommerce.woo-slider div[rn-carousel-indicators] div.rn-carousel-indicator span{font-size:16px;margin:0 4px;color:#fff}.module-woocommerce.woo-slider div[rn-carousel-indicators] div.rn-carousel-indicator span.active{color:#ef473a}.module-woocommerce.woo-slider.fullscreen .bar-header.bar-dark{background-color:#000}.module-woocommerce.woo-slider.fullscreen .scroll{background-color:#000;height:100%;width:100%}.module-woocommerce.woo-slider.fullscreen .scroll ul li .scroll-view{background-color:#000;height:100%;width:100%}.module-woocommerce.woo-slider.fullscreen .scroll ul li .scroll .image{background-repeat:no-repeat;background-size:contain;background-position:center;height:100%;width:100%}.bar-header i.woo_font{font-size:28px;line-height:32px}.bar-header .button-cart{transform:translateX(-10px)}.bar-header .woo-cart-quantity{font-weight:normal!important;position:absolute;top:-10px;font-size:12px!important;left:10px;text-align:left;text-shadow:1px 1px 2px grey!important}","woocommerce2")